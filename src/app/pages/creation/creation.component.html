<div class="header my-4">
  <div>
    <div
      class="d-flex align-items-center"
      *ngIf="!editingName; else nameEditor"
    >
      <h2 class="title flex-fill py-2 m-0">{{ currentParty.name }}</h2>
      <p-button
        icon="pi pi-pencil"
        styleClass="p-2 p-button-secondary p-button-outlined"
        (onClick)="editingName = !editingName"
      ></p-button>
    </div>

    <ng-template #nameEditor>
      <form class="d-flex" (ngSubmit)="saveName()">
        <input
          pInputText
          class="title title-input flex-fill mb-2"
          type="text"
          name="name"
          [(ngModel)]="currentParty.name"
        />

        <p-button type="submit" icon="pi pi-save" styleClass="p-2"></p-button>
      </form>
    </ng-template>
  </div>

  <p class="date m-0">{{ currentParty.date | date }}</p>
</div>

<app-state-preview
  [membersAmount]="(members$ | async)?.length ?? 0"
  [categoriesAmount]="(categories$ | async)?.length ?? 0"
  [totalAmount]="(totalAmount$ | async) ?? 0"
/>

<p-tabView>
  <p-tabPanel header="Agregar">
    <app-add-member />
  </p-tabPanel>
  <p-tabPanel header="Resultados">
    <p>Resultados de los calculos</p>
  </p-tabPanel>
  <p-tabPanel header="Detalle">
    <app-details />
  </p-tabPanel>
</p-tabView>
